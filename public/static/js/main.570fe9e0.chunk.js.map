{"version":3,"sources":["components/SocketProvider/reducer.js","components/RoomSelect/LandingScreen.js","components/ConfigDropdown/index.js","components/RoomSelect/CricketConfig.js","components/RoomSelect/X01Config.js","components/RoomSelect/PlayerSelect.js","components/RoomSelect/CreateRoom.js","lib/index.js","components/RoomSelect/GameSetup.js","lib/createCricketState.js","components/RoomSelect/index.js","components/SpectateMode/index.js","components/ActiveIcon/index.js","components/CricketScoreboard/CricketPlayer.js","components/CricketScoreboard/CricketCenter.js","components/LastTurn/index.js","components/CricketScoreboard/index.js","components/CricketActions/SectorRow.js","components/CricketActions/CurrentTurn.js","components/CricketActions/index.js","components/HeaderTab/index.js","components/CricketLog/index.js","components/StatSheet/index.js","components/CricketStats/index.js","components/CricketMenu/index.js","components/CricketTabs/index.js","components/Cricket/actions/common.js","components/Cricket/actions/finish_turn.js","components/Cricket/actions/restart_leg.js","components/Cricket/reducer.js","components/Cricket/actions/update_state.js","components/Cricket/actions/click_dart_button.js","components/Cricket/actions/erase_dart.js","components/Cricket/actions/undo_turn.js","components/Cricket/actions/next_leg.js","components/Cricket/actions/change_name.js","components/Cricket/actions/change_first_throw.js","components/Cricket/actions/restart_match.js","components/Cricket/simulateDart.js","components/Cricket/index.js","components/X01Scoreboard/X01Center.js","components/X01Scoreboard/X01Player.js","components/X01Scoreboard/index.js","components/X01Actions/index.js","components/X01Stats/index.js","components/X01Log/index.js","components/X01Menu/index.js","components/X01Tabs/index.js","components/X01/actions/common.js","components/X01/actions/next_turn.js","components/X01/actions/next_leg.js","components/X01/actions/undo_turn.js","components/X01/actions/restart_leg.js","components/X01/actions/restart_match.js","components/X01/reducer.js","components/X01/actions/change_name.js","components/X01/actions/change_score.js","components/X01/actions/change_first_throw.js","components/X01/actions/key_number.js","components/X01/actions/key_enter.js","components/X01/actions/key_backspace.js","components/X01/index.js","components/ActiveGameDisplay/index.js","components/App/index.js","components/SocketProvider/index.js","index.js"],"names":["reducer","state","action","type","publicKey","data","roomStatus","shortCode","response","loading","joinRoomErrorText","LandingScreen","checkRoom","joinRoom","selectGame","React","useState","roomCode","setRoomCode","className","href","rel","target","value","placeholder","onChange","e","code","toUpperCase","disabled","onClick","ConfigDropdown","name","setValue","optionsObject","Object","entries","map","idx","text","key","CricketConfig","variants","setVariant","format","standard","X01Config","301","401","501","701","901","1001","start","single","double","end","trackDoubles","yes","no","defaultVariants","teams","getColor","position","getCpuName","cpuValue","Player","color","player","minPlayers","updatePlayer","removePlayer","includeCpu","nextVal","cpu","getCpuNextVaue","getCpuText","PlayerSelect","players","setPlayers","doubles","maxPlayers","p","filter","length","concat","createRoomErrorText","CreateRoom","Math","floor","random","Number","MAX_SAFE_INTEGER","toString","split","reverse","x","isNaN","slice","c","join","timeout","ms","a","Promise","resolve","setTimeout","fromCamelCase","word","toLowerCase","initializeState","game","setupState","title","legs","_","stats","darts","hits","marks","mpr","hitRate","turns","scores","points","isActive","tx","firstThrow","currentThrow","priorTurns","priorLegs","currentTurn","winner","cpuControl","createCricketState","initializeCricket","all","f9","checkouts","doubleIn","misses","doubleOut","score","doubleDart","initializeX01","reducerFn","baseObject","newValue","undefined","reduce","mem","k","v","newObject","updateObject","GameSetup","createRoom","clearGame","useReducer","dispatch","gameConfig","RoomSelect","setGame","SpectateMode","spectating","clickChange","ActiveIcon","sectors","CricketName","changeName","CricketMarkCell","sector","cellText","CricketPlayer","trailing","cpuIcon","CricketCenter","LastTurn","lastTurn","d","eM","display","CricketScoreboard","SectorRow","closed","isBull","clickDart","multiple","CurrentTurn","throwerName","throwerTeam","clickBack","clickNext","Array","from","miss","dart","CricketActions","HeaderTab","active","clickPane","PriorLeg","number","isBreak","PriorTurn","round","bulls","CricketLog","turn","team","ceil","leg","break","StatTable","table","header","cell","rows","row","StatSheet","tables","CricketStats","toFixed","progressiveMarks","arr","array","val","sumArray","VariantList","keys","DangerOption","description","DangerOptions","changeFirstThrow","restartMatch","restartLeg","CricketMenu","VisibleContent","props","currentPane","CricketTabs","setCurrentPane","calculateScore","segmentValue","segment","max","calculateStats","undoStats","playerStats","turnMarks","opponent","min","addStats","every","checkWinner","actions","lastTurnDarts","forEach","legsWon","legSummary","newState","getSectorOptions","currentScores","opponentScores","highestScoreSector","findIndex","highestOpenSector","highestProgressSector","randomSector","pick","push","open","progress","getDisplayValue","cpuLevel","options","margin","getTarget","accuracy","bonus","getResult","simulateTurn","i","simulateDart","Cricket","_wrappedDispatch","isSpectating","setIsSpectating","useEffect","window","document","keyListener","preventDefault","addEventListener","removeEventListener","_controlledDispatch","updateState","X01Center","X01Name","X01Player","X01Scoreboard","scoreboardRef","useRef","stopPropagation","ref","current","DoubleButtons","clickDouble","showZero","X01Actions","inputRef","changeScore","activeScore","doublingIn","doublingOut","missedDoubles","disableNext","rate","numerator","denominator","digits","X01Stats","average","turnCount","count","90","130","170","checkout","doubleStart","doubleEnd","cols","scoreColor","thrower","remaining","X01Log","throw","X01Menu","X01Tabs","removeTurnFromStats","doubling","turnScore","addTurnToStats","newStats","includes","digit","nextTurn","nextLeg","X01","inputElement","activeElement","focus","ActiveGameDisplay","applicationReducer","init","App","appState","sendState","SocketProvider","hashObject","urlFragment","privateKey","initReducer","socket","setSocket","io","on","close","history","replaceState","emit","initialState","incremental","location","pathname","hash","kvPair","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.570fe9e0.chunk.js","sourcesContent":["export const reducer = (state, action) => {\n  switch (action.type) {\n    case \"update_state\":\n      if (state.publicKey === action.data.publicKey) {\n        return { ...state, state: action.data.state };\n      }\n      return state;\n\n    case \"check_room_response\":\n      return {\n        ...state,\n        roomStatus: {\n          shortCode: action.shortCode,\n          publicKey: action.publicKey,\n        },\n      };\n\n    case \"create_room_response\":\n      return {\n        ...state,\n        state: action.response.state,\n        publicKey: action.response.publicKey,\n        shortCode: action.response.shortCode,\n      };\n\n    case \"join_room_response\":\n      return {\n        ...state,\n        loading: false,\n        state: action.response.state,\n        publicKey: action.response.publicKey,\n        shortCode: state.roomStatus.shortCode,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const initReducer = ({ urlFragment }) => {\n  const state = {\n    loading: false,\n    state: null,\n    publicKey: null,\n    privateKey: null,\n    shortCode: null,\n    roomStatus: {\n      shortCode: null,\n      publicKey: null,\n    },\n  };\n\n  if (urlFragment[0] === \"room\" && urlFragment[1]) {\n    state.loading = urlFragment[1];\n  }\n\n  return state;\n};\n","import React from \"react\";\n\nimport \"./LandingScreen.scss\";\n\nconst joinRoomErrorText = ({ shortCode, publicKey }) => {\n  if (shortCode && !publicKey) {\n    return \"This room code doesn't exist. (Codes expire after 24 hours.)\";\n  }\n\n  return null;\n};\n\nconst LandingScreen = ({ checkRoom, roomStatus, joinRoom, selectGame }) => {\n  const [roomCode, setRoomCode] = React.useState(\"\");\n\n  return (\n    <div className=\"landing-container\">\n      <div className=\"landing-text\">\n        <p>\n          Hey, this is <strong>DistanceDarts</strong>. <br /> Its a tiny website that helps people\n          keep score when theyre playing webcam darts against each other.\n        </p>\n        <p>\n          Everything works off short room codes, kind of like Jackbox games - you can create a game\n          and send the code to your friends, and everyone can track the scores and statistics.\n        </p>\n        <p>\n          When you record someones throw, it updates for everyone else in real time. Weve used it\n          to play a few tournaments and its worked pretty well so far.\n        </p>\n        <p>\n          A few other sites do the same sort of thing, but I tried to streamline the UI and make\n          this easy and fun to use, and ensure it works with whatever kind of setup youve got.\n          Also, its extremely free, forever.\n        </p>\n        <p>\n          Bugs or feature requests? Hit me up on twitter, Im{\" \"}\n          <a href=\"https://twitter.com/kylehill\" rel=\"noopener noreferrer\" target=\"_blank\">\n            @kylehill\n          </a>\n          .\n        </p>\n      </div>\n      <div className=\"landing-join\">\n        Join a room:\n        <div className=\"landing-join-controls\">\n          <input\n            type=\"text\"\n            value={roomCode}\n            placeholder=\"Room Code\"\n            onChange={(e) => {\n              const code = e.target.value.toUpperCase();\n              setRoomCode(code);\n              checkRoom(code);\n            }}\n          />\n          <button\n            disabled={!roomStatus.publicKey}\n            onClick={() => {\n              if (!roomStatus.publicKey) {\n                return;\n              }\n\n              joinRoom();\n            }}\n          >\n            Join Room\n          </button>\n          {joinRoomErrorText(roomStatus) && (\n            <div className=\"error-text\">{joinRoomErrorText(roomStatus)}</div>\n          )}\n        </div>\n      </div>\n      <div className=\"landing-create\">\n        Create a new game:\n        <div className=\"landing-create-buttons\">\n          <button className=\"button-cricket\" onClick={() => selectGame(\"cricket\")}>\n            Cricket\n          </button>\n          <button className=\"button-x01\" onClick={() => selectGame(\"x01\")}>\n            X01\n          </button>\n          <button className=\"button-clocky\" disabled={true} onClick={() => selectGame(\"clocky\")}>\n            Clocky\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LandingScreen;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst ConfigDropdown = ({ name, value, setValue, optionsObject }) => {\n  return (\n    <select\n      className=\"config-dropdown\"\n      value={value}\n      onChange={(e) => {\n        setValue(name, e.target.value);\n      }}\n    >\n      {Object.entries(optionsObject).map(([value, text], idx) => {\n        return (\n          <option key={idx} value={value}>\n            {text}\n          </option>\n        );\n      })}\n    </select>\n  );\n};\n\nexport default ConfigDropdown;\n","import React from \"react\";\nimport ConfigDropdown from \"components/ConfigDropdown\";\n\nimport createCricketState from \"lib/createCricketState\";\n\nconst CricketConfig = ({ variants, setVariant }) => {\n  return (\n    <div className=\"setup-config-container\">\n      {\"Start a game of \"}\n      <ConfigDropdown\n        name=\"format\"\n        value={variants.format || \"standard\"}\n        setValue={setVariant}\n        optionsObject={{\n          standard: \"Standard Cricket\",\n          \"no-points\": \"Cricket, No Points\",\n        }}\n      />\n      .\n    </div>\n  );\n};\n\nexport const initializeCricket = (state, roomCode) => {\n  return createCricketState({\n    roomCode,\n    players: state.players,\n    variants: state.variants,\n    title: \"\",\n  });\n};\n\nexport default CricketConfig;\n","import React from \"react\";\nimport ConfigDropdown from \"components/ConfigDropdown\";\n\nconst X01Config = ({ variants, setVariant }) => {\n  return (\n    <div className=\"setup-config-container\">\n      <p>\n        {\"Start a game of \"}\n        <ConfigDropdown\n          name=\"target\"\n          value={variants.target || \"501\"}\n          setValue={setVariant}\n          optionsObject={{\n            301: \"301\",\n            401: \"401\",\n            501: \"501\",\n            701: \"701\",\n            901: \"901\",\n            1001: \"1001\",\n          }}\n        />\n        .\n      </p>\n      <p>\n        {\"Players \"}\n        <ConfigDropdown\n          name=\"start\"\n          value={variants.start || \"single\"}\n          setValue={setVariant}\n          optionsObject={{\n            single: \"don't need to double in\",\n            double: \"need to double in\",\n          }}\n        />\n        {\" and \"}\n        <ConfigDropdown\n          name=\"end\"\n          value={variants.end || \"double\"}\n          setValue={setVariant}\n          optionsObject={{\n            single: \"don't need to double out\",\n            double: \"need to double out\",\n          }}\n        />\n        .\n      </p>\n      <p>\n        {\"By default, this app tracks attempts at doubling in and out. \"}\n        <ConfigDropdown\n          name=\"trackDoubles\"\n          value={variants.trackDoubles || \"yes\"}\n          setValue={setVariant}\n          optionsObject={{\n            yes: \"Keep that enabled.\",\n            no: \"Disable double tracking.\",\n          }}\n        />\n      </p>\n    </div>\n  );\n};\n\nexport default X01Config;\n\nconst defaultVariants = {\n  target: \"501\",\n  teams: \"singles\",\n  start: \"single\",\n  end: \"double\",\n  trackDoubles: \"yes\",\n};\n\nconst newPlayerStats = () => ({\n  all: { darts: 0, points: 0 },\n  f9: { darts: 0, points: 0 },\n  turns: {},\n  checkouts: [],\n  doubleIn: { misses: 0, hits: 0 },\n  doubleOut: { misses: 0, hits: 0 },\n});\n\nexport const initializeX01 = (state, roomCode) => {\n  const variants = { ...defaultVariants, ...state.variants };\n  const legs = state.players.map((_) => 0);\n  const scores = state.players.map((_) => Number(variants.target));\n  const stats = state.players.map((_) => newPlayerStats());\n\n  return {\n    legs,\n    stats,\n    scores,\n    variants,\n    roomCode,\n    isActive: true,\n    tx: 0,\n    game: \"x01\",\n    players: state.players,\n    firstThrow: 0,\n    currentThrow: 0,\n    priorTurns: [],\n    priorLegs: [],\n    currentTurn: {\n      score: \"\",\n      doubleDart: false,\n    },\n    winner: null,\n    title: `Room Code: ${roomCode}`,\n  };\n};\n","import React from \"react\";\n\nimport \"./PlayerSelect.scss\";\n\nconst getColor = (position) => {\n  switch (position) {\n    case 0:\n      return \"red\";\n    case 1:\n      return \"blue\";\n    case 2:\n      return \"green\";\n    case 3:\n      return \"orange\";\n    case 4:\n      return \"purple\";\n    case 5:\n    default:\n      return \"pink\";\n  }\n};\n\nconst getCpuText = (player) => {\n  switch (player.cpu) {\n    case \"easy\":\n      return \"\";\n\n    case \"medium\":\n      return \"\";\n\n    case \"hard\":\n      return \"\";\n\n    case false:\n    default:\n      return \"\";\n  }\n};\n\nconst getCpuNextVaue = (player) => {\n  switch (player.cpu) {\n    case \"easy\":\n      return \"medium\";\n\n    case \"medium\":\n      return \"hard\";\n\n    case \"hard\":\n      return false;\n\n    case false:\n    default:\n      return \"easy\";\n  }\n};\n\nconst getCpuName = (cpuValue, position) => {\n  switch (cpuValue) {\n    case \"easy\":\n      return \"CPU Easy\";\n\n    case \"medium\":\n      return \"CPU Medium\";\n\n    case \"hard\":\n      return \"CPU Hard\";\n\n    case false:\n    default:\n      return `Player ${position + 1}`;\n  }\n};\n\nconst Player = ({\n  color,\n  player,\n  position,\n  minPlayers,\n  updatePlayer,\n  removePlayer,\n  includeCpu,\n}) => {\n  return (\n    <div className={`setup-player setup-player-${color}`}>\n      <input\n        className=\"setup-player-name\"\n        value={player.name}\n        onChange={(e) => {\n          updatePlayer(position, { ...player, name: e.target.value });\n        }}\n      />\n      {includeCpu && (\n        <button\n          className=\"setup-player-cpu\"\n          onClick={() => {\n            const nextVal = getCpuNextVaue(player);\n            updatePlayer(position, {\n              ...player,\n              cpu: nextVal,\n              name: getCpuName(nextVal, position),\n            });\n          }}\n        >\n          {getCpuText(player)}\n        </button>\n      )}\n      {position >= minPlayers && (\n        <button\n          className=\"setup-player-remove\"\n          onClick={() => {\n            removePlayer(position);\n          }}\n        >\n          \n        </button>\n      )}\n    </div>\n  );\n};\n\nconst PlayerSelect = ({ players, setPlayers, doubles, minPlayers, maxPlayers, includeCpu }) => {\n  const addPlayer = () => {\n    if (doubles) {\n      setPlayers(\n        players.concat([\n          {\n            cpu: false,\n            name: `Player ${players.length + 1}`,\n          },\n          {\n            cpu: false,\n            name: `Player ${players.length + 2}`,\n          },\n        ])\n      );\n    } else {\n      setPlayers(\n        players.concat({\n          cpu: false,\n          name: `Player ${players.length + 1}`,\n        })\n      );\n    }\n  };\n\n  const updatePlayer = (position, player) => {\n    setPlayers(\n      players.map((p, idx) => {\n        if (idx === position) {\n          return player;\n        }\n        return p;\n      })\n    );\n  };\n\n  const removePlayer = (position) => {\n    setPlayers(\n      players.filter((p, idx) => {\n        if (idx === position) {\n          return false;\n        }\n        return true;\n      })\n    );\n  };\n\n  return (\n    <div className=\"setup-players\">\n      {players.map((p, idx) => {\n        return (\n          <Player\n            color={getColor(idx)}\n            key={idx}\n            player={p}\n            position={idx}\n            minPlayers={minPlayers}\n            updatePlayer={updatePlayer}\n            removePlayer={removePlayer}\n            includeCpu={includeCpu}\n          />\n        );\n      })}\n      {players.length < maxPlayers && (\n        <button onClick={addPlayer} className=\"setup-players-create\">\n          Add Player\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default PlayerSelect;\n","import React from \"react\";\n\nimport \"./CreateRoom.scss\";\n\nconst createRoomErrorText = ({ shortCode, publicKey }) => {\n  if (shortCode && publicKey) {\n    return \"This room code is in use.\";\n  }\n\n  return null;\n};\n\nconst CreateRoom = ({ checkRoom, roomStatus }) => {\n  const [roomCode, setRoomCode] = React.useState(\"\");\n\n  return (\n    <div className=\"setup-room\">\n      <input\n        type=\"text\"\n        value={roomCode}\n        placeholder={\"Room code\"}\n        onChange={(e) => {\n          const code = e.target.value.toUpperCase();\n          setRoomCode(code);\n          checkRoom(code);\n        }}\n      />\n      <button\n        onClick={() => {\n          const code = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER)\n            .toString(34)\n            .toUpperCase()\n            .split(\"\")\n            .reverse()\n            .filter((x) => isNaN(x))\n            .slice(0, 4)\n            .map((c) => {\n              switch (c) {\n                case \"I\":\n                  return \"Y\";\n                case \"O\":\n                  return \"Z\";\n                default:\n                  return c;\n              }\n            })\n            .join(\"\");\n\n          setRoomCode(code);\n          checkRoom(code);\n        }}\n      >\n        Random Code\n      </button>\n      {createRoomErrorText(roomStatus) && (\n        <div className=\"error-text\">{createRoomErrorText(roomStatus)}</div>\n      )}\n    </div>\n  );\n};\n\nexport default CreateRoom;\n","export const updateObject = (baseObject, key, newValue) => {\n  if (newValue === undefined) {\n    return Object.entries(baseObject).reduce((mem, [k, v]) => {\n      if (k !== key) {\n        mem[k] = v;\n      }\n\n      return mem;\n    }, {});\n  }\n\n  const newObject = Object.entries(baseObject).reduce((mem, [k, v]) => {\n    mem[k] = v;\n    return mem;\n  }, {});\n\n  newObject[key] = newValue;\n  return newObject;\n};\n\nexport const timeout = async (ms) => {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n};\n\nexport const pick = (array) => {\n  if (!array.length) {\n    return undefined;\n  }\n  return array[Math.floor(Math.random() * array.length)];\n};\n\nexport const fromCamelCase = (text) => {\n  return text\n    .split(\"-\")\n    .map((word) => {\n      return word[0].toUpperCase() + word.split(\"\").slice(1).join(\"\").toLowerCase();\n    })\n    .join(\" \");\n};\n","import React from \"react\";\nimport CricketConfig, { initializeCricket } from \"./CricketConfig\";\nimport X01Config, { initializeX01 } from \"./X01Config\";\nimport PlayerSelect from \"./PlayerSelect\";\nimport CreateRoom from \"./CreateRoom\";\n\nimport { updateObject } from \"lib\";\n\nimport \"./GameSetup.scss\";\n\nconst gameConfig = (game, variants, setVariant) => {\n  switch (game) {\n    case \"cricket\":\n      return <CricketConfig variants={variants} setVariant={setVariant} />;\n\n    case \"x01\":\n      return <X01Config variants={variants} setVariant={setVariant} />;\n\n    default:\n      return null;\n  }\n};\n\nconst initializeState = (game, setupState, roomCode) => {\n  switch (game) {\n    case \"cricket\":\n      return initializeCricket(setupState, roomCode);\n\n    case \"x01\":\n      return initializeX01(setupState, roomCode);\n    default:\n      return null;\n  }\n};\n\nconst reducerFn = (state, action) => {\n  switch (action.type) {\n    case \"set_variant\":\n      const variants = updateObject(state.variants, action.key, action.value);\n      return { ...state, variants };\n\n    case \"set_players\":\n      return { ...state, players: action.players };\n\n    default:\n      return state;\n  }\n};\n\nconst GameSetup = ({ game, checkRoom, roomStatus, clearGame, createRoom }) => {\n  const [setupState, dispatch] = React.useReducer(reducerFn, {\n    variants: {},\n    players: [\n      { cpu: false, name: \"Player 1\" },\n      { cpu: false, name: \"Player 2\" },\n    ],\n  });\n\n  const setVariant = (key, value) => {\n    dispatch({ type: \"set_variant\", key, value });\n  };\n\n  const setPlayers = (players) => {\n    dispatch({ type: \"set_players\", players });\n  };\n\n  const clickCreateGame = () => {\n    const state = initializeState(game, setupState, roomStatus.shortCode);\n    createRoom(state);\n  };\n\n  const maxPlayers = game === \"cricket\" ? 2 : 6;\n  const minPlayers = game === \"cricket\" ? 2 : 1;\n\n  return (\n    <div className={`setup-container setup-container-${game}`}>\n      <div className=\"setup-config\">{gameConfig(game, setupState.variants, setVariant)}</div>\n      <PlayerSelect\n        players={setupState.players}\n        setPlayers={setPlayers}\n        minPlayers={minPlayers}\n        maxPlayers={maxPlayers}\n        includeCpu={game === \"cricket\"}\n      />\n      <CreateRoom checkRoom={checkRoom} roomStatus={roomStatus} />\n      <button\n        disabled={!roomStatus.shortCode || !!roomStatus.publicKey}\n        className=\"setup-create\"\n        onClick={clickCreateGame}\n      >\n        Start Game\n      </button>\n    </div>\n  );\n};\n\nexport default GameSetup;\n","const newScoreObject = () => ({\n  points: 0,\n  marks: [0, 0, 0, 0, 0, 0, 0],\n});\n\nconst newStatsObject = () => ({\n  darts: 0,\n  hits: 0,\n  marks: 0,\n  mpr: 0,\n  hitRate: 0,\n  turns: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n});\n\nexport default ({ roomCode, players, variants, title }) => {\n  const legs = players.map((_) => 0);\n  const stats = players.map((_) => newStatsObject());\n\n  const scores = [newScoreObject(), newScoreObject()];\n\n  return {\n    legs,\n    stats,\n    scores,\n    roomCode,\n    title: title || `Room Code: ${roomCode}`,\n    isActive: true,\n    tx: 0,\n    game: \"cricket\",\n    players: players,\n    variants: variants,\n    firstThrow: 0,\n    currentThrow: 0,\n    priorTurns: [],\n    priorLegs: [],\n    currentTurn: [],\n    winner: null,\n    cpuControl: !!players[0].cpu,\n  };\n};\n","import React from \"react\";\nimport LandingScreen from \"./LandingScreen\";\nimport GameSetup from \"./GameSetup\";\n\nconst RoomSelect = ({ checkRoom, roomStatus, joinRoom, createRoom }) => {\n  const [game, setGame] = React.useState(null);\n  const clearGame = () => setGame(null);\n\n  if (!game) {\n    return <LandingScreen joinRoom={joinRoom} checkRoom={checkRoom} roomStatus={roomStatus} selectGame={setGame} />;\n  }\n\n  return (\n    <GameSetup\n      game={game}\n      clearGame={clearGame}\n      checkRoom={checkRoom}\n      roomStatus={roomStatus}\n      createRoom={createRoom}\n    />\n  );\n};\n\nexport default RoomSelect;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst SpectateMode = ({ spectating, clickChange }) => {\n  return (\n    <div className=\"spectate-mode\">\n      {spectating && (\n        <div className=\"spectate-copy\">\n          You are currently <strong>spectating</strong>.\n          <br />\n          Click the button to the right to switch to scoring mode.\n        </div>\n      )}\n\n      {!spectating && (\n        <div className=\"spectate-copy\">\n          You are currently <strong>scoring</strong> and can mark the scoreboard.\n          <br />\n          Click the button to the right to switch to spectate mode.\n        </div>\n      )}\n      <button\n        className={`spectate-button spectate-button-${spectating ? \"spectating\" : \"scoring\"}`}\n        onClick={clickChange}\n      >\n        {spectating ? \"\" : \"\"}\n      </button>\n    </div>\n  );\n};\n\nexport default SpectateMode;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst ActiveIcon = ({ currentThrow, winner }) => {\n  if (winner) {\n    return null;\n  }\n  return <div className={`active-icon active-icon-${currentThrow}`}></div>;\n};\n\nexport default ActiveIcon;\n","import React from \"react\";\n\nconst sectors = [\"20\", \"19\", \"18\", \"17\", \"16\", \"15\", \"B\"];\n\nconst cellText = (marks, sector) => {\n  switch (marks) {\n    case 0:\n      return sectors[sector];\n\n    case 1:\n      return \"/\";\n\n    case 2:\n      return \"X\";\n\n    case 3:\n    default:\n      return \"\";\n  }\n};\n\nconst CricketName = ({ value, changeName }) => {\n  return (\n    <input className=\"cricket-name\" value={value} onChange={(e) => changeName(e.target.value)} />\n  );\n};\n\nconst CricketMarkCell = ({ marks, sector }) => {\n  const text = cellText(marks, sector);\n  return (\n    <div\n      className={`cricket-cell cricket-marks ${marks >= 3 ? \"cricket-marks-complete\" : \"\"} ${\n        marks === 0 ? \"cricket-marks-empty\" : \"\"\n      }`}\n    >\n      {text}\n    </div>\n  );\n};\n\nconst cpuIcon = (cpu) => {\n  switch (cpu) {\n    case \"easy\":\n      return \"\";\n    case \"medium\":\n      return \"\";\n    case \"hard\":\n      return \"\";\n    default:\n      return \"\";\n  }\n};\n\nconst CricketPlayer = ({\n  changeName,\n  cpu,\n  name,\n  marks,\n  points,\n  legs,\n  firstThrow,\n  trailing,\n  winner,\n}) => {\n  return (\n    <div className=\"cricket-player\">\n      <div className={`cricket-cell cricket-nameplate ${winner ? \"cricket-winner\" : \"\"}`}>\n        {cpu && <span className=\"cricket-cpu-icon\">{cpuIcon(cpu)}</span>}\n        {changeName && <CricketName changeName={changeName} value={name} />}\n        {!changeName && name}\n        {firstThrow && <div className=\"cricket-leader\" title=\"Throwing first this leg\"></div>}\n      </div>\n      <div className=\"cricket-cell cricket-legs\">{legs}</div>\n      {marks.map((marks, idx) => {\n        return <CricketMarkCell key={idx} marks={marks} sector={idx} />;\n      })}\n      <div className={`cricket-cell cricket-points ${trailing ? \"cricket-points-trailing\" : \"\"}`}>\n        {points}\n      </div>\n    </div>\n  );\n};\n\nexport default CricketPlayer;\n","import React from \"react\";\n\nconst CricketCenter = ({ title }) => {\n  return (\n    <div className=\"cricket-center\">\n      <div className=\"cricket-center-cell center-7\">{title}</div>\n      <div className=\"cricket-center-cell center-2\">Legs</div>\n      <div className=\"cricket-center-cell center-1\">20</div>\n      <div className=\"cricket-center-cell center-1\">19</div>\n      <div className=\"cricket-center-cell center-1\">18</div>\n      <div className=\"cricket-center-cell center-1\">17</div>\n      <div className=\"cricket-center-cell center-1\">16</div>\n      <div className=\"cricket-center-cell center-1\">15</div>\n      <div className=\"cricket-center-cell center-1\">B</div>\n      <div className=\"cricket-center-cell center-3\">Points</div>\n    </div>\n  );\n};\n\nexport default CricketCenter;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst LastTurn = ({ state }) => {\n  if (state.priorTurns.length === 0) {\n    return <div className=\"last-turn\"></div>;\n  }\n\n  const lastTurn = state.priorTurns[state.priorTurns.length - 1];\n  const player = state.players[(state.currentThrow + 1) % state.players.length].name;\n\n  switch (state.game) {\n    case \"cricket\":\n      const darts = lastTurn\n        .filter((d) => d.eM)\n        .map((d) => d.display)\n        .join(\", \");\n      const marks = lastTurn.reduce((mem, d) => mem + (d.eM || 0), 0);\n      return (\n        <div className=\"last-turn\">\n          <strong>Last Turn: </strong>\n          {player} ({darts.length ? `${darts} -- ` : \"\"}\n          {marks} mark{marks === 1 ? \"\" : \"s\"})\n        </div>\n      );\n\n    case \"x01\":\n      return (\n        <div className=\"last-turn\">\n          <strong>Last Turn: </strong>\n          {player} ({lastTurn.score})\n        </div>\n      );\n\n    default:\n      return <div className=\"last-turn\"></div>;\n  }\n};\n\nexport default LastTurn;\n","import React from \"react\";\n\nimport ActiveIcon from \"components/ActiveIcon\";\nimport CricketPlayer from \"./CricketPlayer\";\nimport CricketCenter from \"./CricketCenter\";\nimport LastTurn from \"components/LastTurn\";\n\nimport \"./index.scss\";\n\nconst CricketScoreboard = ({ spectating, state, changeName }) => {\n  return (\n    <div className=\"cricket-scoreboard\">\n      <ActiveIcon currentThrow={state.currentThrow} winner={state.winner !== null} />\n      <div className=\"cricket-content\">\n        <CricketCenter title={state.title} />\n        <CricketPlayer\n          changeName={!spectating && ((name) => changeName(name, 0))}\n          name={state.players[0].name}\n          cpu={state.players[0].cpu}\n          marks={state.scores[0].marks}\n          points={state.scores[0].points}\n          legs={state.legs[0]}\n          firstThrow={state.firstThrow === 0}\n          trailing={state.scores[0].points < state.scores[1].points}\n          winner={state.winner === 0}\n        />\n        <CricketPlayer\n          changeName={!spectating && ((name) => changeName(name, 1))}\n          name={state.players[1].name}\n          cpu={state.players[1].cpu}\n          marks={state.scores[1].marks}\n          points={state.scores[1].points}\n          legs={state.legs[1]}\n          firstThrow={state.firstThrow === 1}\n          trailing={state.scores[0].points > state.scores[1].points}\n          winner={state.winner === 1}\n        />\n        <LastTurn state={state} />\n      </div>\n    </div>\n  );\n};\n\nexport default CricketScoreboard;\n","import React from \"react\";\n\nconst SectorRow = ({ sector, display, closed, isBull, clickDart }) => {\n  return (\n    <div className={`cricket-sector ${closed ? \"cricket-sector-closed\" : \"\"}`}>\n      <div className=\"cricket-sector-label\">{display}</div>\n      <div className=\"cricket-sector-buttons\">\n        {!closed && (\n          <>\n            <button\n              className=\"cricket-button cricket-button-single\"\n              onClick={() => {\n                clickDart({ sector, multiple: 1, display: `${display}` });\n              }}\n            >\n              {`${display}`}\n            </button>\n\n            <button\n              className=\"cricket-button cricket-button-double\"\n              onClick={() => {\n                clickDart({ sector, multiple: 2, display: `D${display}` });\n              }}\n            >\n              {`D${display}`}\n            </button>\n\n            {!isBull && (\n              <button\n                className=\"cricket-button cricket-button-treble\"\n                onClick={() => {\n                  clickDart({ sector, multiple: 3, display: `T${display}` });\n                }}\n              >\n                {`T${display}`}\n              </button>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SectorRow;\n","import React from \"react\";\n\nconst CurrentTurn = ({ winner, spectating, throwerName, throwerTeam, darts, clickBack, clickNext }) => {\n  darts = Array.from(Array(3), (_, idx) => darts[idx] || { miss: true });\n\n  return (\n    <div className=\"cricket-current\">\n      {winner === null && (\n        <div className={`cricket-current-thrower cricket-current-thrower-${throwerTeam}`}>\n          <strong>Current Turn:</strong> {throwerName}\n        </div>\n      )}\n      {!spectating && (\n        <button className=\"cricket-current-button cricket-current-back\" onClick={clickBack}>\n          Back\n        </button>\n      )}\n      {winner === null &&\n        darts.map((dart, idx) => {\n          return (\n            <div\n              className={`cricket-current-dart ${dart.multiple ? `cricket-current-dart-${dart.multiple}` : \"\"}`}\n              key={idx}\n            >\n              {dart.display}\n            </div>\n          );\n        })}\n      {!spectating && (\n        <button className=\"cricket-current-button cricket-current-next\" onClick={clickNext}>\n          Next\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default CurrentTurn;\n","import React from \"react\";\n\nimport SectorRow from \"./SectorRow\";\nimport CurrentTurn from \"./CurrentTurn\";\n\nimport \"./index.scss\";\n\nconst CricketActions = ({ state, clickBack, clickNext, clickDart, spectating }) => {\n  return (\n    <div className=\"cricket-actions\">\n      {!spectating &&\n        [\"20\", \"19\", \"18\", \"17\", \"16\", \"15\", \"B\"].map((display, idx) => {\n          const closed = state.scores[0].marks[idx] >= 3 && state.scores[1].marks[idx] >= 3;\n          const isBull = display === \"B\";\n          return (\n            <SectorRow key={idx} sector={idx} closed={closed} display={display} isBull={isBull} clickDart={clickDart} />\n          );\n        })}\n\n      <CurrentTurn\n        spectating={spectating}\n        winner={state.winner}\n        throwerTeam={state.currentThrow}\n        throwerName={state.players[state.currentThrow].name}\n        clickBack={clickBack}\n        clickNext={clickNext}\n        darts={state.currentTurn}\n      />\n    </div>\n  );\n};\n\nexport default CricketActions;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst HeaderTab = ({ title, active, clickPane }) => {\n  return (\n    <div onClick={clickPane} className={`tab ${active ? \"tab-active\" : \"\"}`}>\n      {title}\n    </div>\n  );\n};\n\nexport default HeaderTab;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst PriorLeg = ({ number, winner, isBreak, scores }) => {\n  return (\n    <div className=\"cricket-log-leg\">\n      <div className=\"cricket-log-number\">Leg {number}</div>\n      <div className=\"cricket-log-winner\">Winner: {winner}</div>\n      {isBreak && <div className=\"cricket-log-break\">Break</div>}\n      <div className=\"cricket-log-scores\">\n        {scores[0]} - {scores[1]}\n      </div>\n    </div>\n  );\n};\n\nconst PriorTurn = ({ darts, name, round, color }) => {\n  const marks = darts.reduce((mem, dart) => mem + dart.eM, 0);\n  const bulls = darts.filter((dart) => dart.sector === 6).reduce((mem, dart) => mem + dart.eM, 0);\n\n  return (\n    <div className=\"cricket-log-turn\">\n      <div className={`cricket-log-color cricket-log-color-${color}`}></div>\n      <div className=\"cricket-log-round\">\n        {name}, Turn {round}\n      </div>\n      {marks >= 4 && <div className=\"cricket-log-marks\">{marks} Marks</div>}\n      {marks < 4 && bulls >= 2 && <div className=\"cricket-log-bulls\">{bulls} Bulls</div>}\n      <div className=\"cricket-log-darts\">\n        {darts.map((dart, idx) => {\n          if (dart.miss) {\n            return <div key={idx} className=\"cricket-log-dart cricket-log-dart-miss\"></div>;\n          }\n          return (\n            <div key={idx} className={`cricket-log-dart cricket-log-dart-${dart.multiple}`}>\n              {dart.display}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst CricketLog = ({ state }) => {\n  const turns = [...state.priorTurns].reverse();\n  const legs = [...state.priorLegs].reverse();\n\n  return (\n    <div className=\"cricket-log\">\n      {turns.map((turn, idx) => {\n        const team = (state.firstThrow + (turns.length - idx + 1)) % 2;\n\n        return (\n          <PriorTurn\n            key={idx}\n            round={Math.ceil((turns.length - idx) / 2)}\n            darts={turn}\n            name={state.players[team].name}\n            color={team === 0 ? \"red\" : \"blue\"}\n          />\n        );\n      })}\n      {legs.map((leg, idx) => {\n        return (\n          <PriorLeg\n            number={legs.length - idx}\n            winner={state.players[leg.winner].name}\n            scores={leg.score}\n            isBreak={leg.break}\n            key={idx}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport default CricketLog;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst StatTable = ({ table }) => {\n  return (\n    <table className=\"stat-table\">\n      <thead>\n        <tr>\n          {table.header.map((cell, idx) => {\n            return <th key={idx}>{cell}</th>;\n          })}\n        </tr>\n      </thead>\n\n      <tbody>\n        {table.rows.map((row, idx) => {\n          return (\n            <tr key={idx}>\n              {row.map((cell, idx) => {\n                return <td key={idx}>{cell}</td>;\n              })}\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nconst StatSheet = ({ tables }) => {\n  return (\n    <div className=\"stat-sheet\">\n      {tables.map((table, idx) => {\n        return <StatTable table={table} key={idx} />;\n      })}\n    </div>\n  );\n};\n\nexport default StatSheet;\n","import React from \"react\";\n\nimport StatSheet from \"components/StatSheet\";\n\nconst sumArray = (array) => {\n  return array.reduce((mem, val) => mem + val, 0);\n};\n\nconst cumulativeArray = (array) => {\n  return array.map((_, idx, arr) => {\n    return sumArray(arr.slice(idx));\n  });\n};\n\nconst CricketStats = ({ state }) => {\n  const tables = [\n    {\n      header: [\"\", \"MPR\", \"Hit %\"],\n      rows: state.players.map((p, idx) => {\n        return [p.name, state.stats[idx].mpr.toFixed(2), (state.stats[idx].hitRate * 100).toFixed(2) + \"%\"];\n      }),\n    },\n    {\n      header: [\"\", \"3M+\", \"5M+\", \"7M+\"],\n      rows: state.players.map((p, idx) => {\n        const progressiveMarks = cumulativeArray(state.stats[idx].turns);\n        return [p.name, progressiveMarks[3], progressiveMarks[5], progressiveMarks[7]];\n      }),\n    },\n  ];\n\n  return <StatSheet tables={tables} />;\n};\n\nexport default CricketStats;\n","import React from \"react\";\nimport { fromCamelCase } from \"lib\";\n\nimport \"./index.scss\";\n\nconst VariantList = ({ variants }) => {\n  if (Object.keys(variants).length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"cricket-menu-variants\">\n      {Object.entries(variants).map(([key, value]) => {\n        return (\n          <p>\n            <strong>{fromCamelCase(key)}:</strong> {fromCamelCase(value)}\n          </p>\n        );\n      })}\n    </div>\n  );\n};\n\nconst DangerOption = ({ action, title, description }) => {\n  return (\n    <div className=\"danger-option\">\n      <div className=\"danger-description\">{description}</div>\n      <button onClick={action} className=\"danger-title\">\n        {title}\n      </button>\n    </div>\n  );\n};\n\nconst DangerOptions = ({ state, changeFirstThrow, restartMatch, restartLeg }) => {\n  return (\n    <div className=\"cricket-menu-danger\">\n      <DangerOption\n        title=\"Change First Thrower\"\n        description=\"Changes the first thrower for this leg. Restarts any leg in progress.\"\n        action={() => changeFirstThrow((state.firstThrow + 1) % 2)}\n      />\n\n      <DangerOption\n        title=\"Restart Leg\"\n        description=\"Restarts this leg from the beginning.\"\n        action={restartLeg}\n      />\n\n      <DangerOption\n        title=\"Restart Match\"\n        description=\"Restarts this match from the beginning.\"\n        action={restartMatch}\n      />\n    </div>\n  );\n};\n\nconst CricketMenu = ({ state, changeFirstThrow, restartMatch, restartLeg, spectating }) => {\n  return (\n    <div className=\"cricket-menu\">\n      <VariantList variants={state.variants} />\n      <a href=\"/\">Select (or create) a new room</a>\n      {!spectating && (\n        <DangerOptions\n          state={state}\n          changeFirstThrow={changeFirstThrow}\n          restartMatch={restartMatch}\n          restartLeg={restartLeg}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default CricketMenu;\n","import React from \"react\";\n\nimport HeaderTab from \"components/HeaderTab\";\nimport CricketLog from \"components/CricketLog\";\nimport CricketStats from \"components/CricketStats\";\nimport CricketMenu from \"components/CricketMenu\";\n\nimport \"./index.scss\";\n\nconst VisibleContent = (props) => {\n  const { currentPane, state } = props;\n\n  switch (currentPane) {\n    case 1:\n      return <CricketLog state={state} />;\n\n    case 2:\n      return <CricketMenu {...props} />;\n\n    case 0:\n    default:\n      return <CricketStats state={state} />;\n  }\n};\n\nconst CricketTabs = (props) => {\n  const [currentPane, setCurrentPane] = React.useState(0);\n  const tabTitles = [\"Stats\", \"Log\", \"Menu\"];\n\n  return (\n    <div className=\"tab-container\">\n      <div className=\"tab-header\">\n        {tabTitles.map((title, idx) => {\n          return (\n            <HeaderTab key={idx} title={title} active={idx === currentPane} clickPane={() => setCurrentPane(idx)} />\n          );\n        })}\n      </div>\n      <div className=\"tab-content\">\n        <VisibleContent currentPane={currentPane} {...props} />\n      </div>\n    </div>\n  );\n};\n\nexport default CricketTabs;\n","export const calculateScore = (format, marks) => {\n  switch (format) {\n    case \"no-points\":\n      return 0;\n\n    case \"standard\":\n    default: {\n      return [20, 19, 18, 17, 16, 15, 25].reduce((mem, segmentValue, segment) => {\n        return mem + Math.max(0, marks[segment] - 3) * segmentValue;\n      }, 0);\n    }\n  }\n};\n\nexport const newStats = () => {\n  return [\n    { darts: 0, marks: 0, hits: 0, turns: Array.from(Array(10), (_) => 0), mpr: 0, hitRate: 0 },\n    { darts: 0, marks: 0, hits: 0, turns: Array.from(Array(10), (_) => 0), mpr: 0, hitRate: 0 },\n  ];\n};\n\nexport const newScores = () => {\n  return [\n    { points: 0, marks: [0, 0, 0, 0, 0, 0, 0] },\n    { points: 0, marks: [0, 0, 0, 0, 0, 0, 0] },\n  ];\n};\n\nexport const calculateStats = ({ marks, darts, hits, turns }) => {\n  const mpr = (marks / (darts || 1)) * 3;\n  const hitRate = hits / (darts || 1);\n\n  return {\n    darts,\n    marks,\n    hits,\n    turns,\n    mpr,\n    hitRate,\n  };\n};\n\nexport const undoStats = (playerStats, turn) => {\n  let { darts, hits, marks } = playerStats;\n  const turns = [...playerStats.turns];\n\n  const turnMarks = turn.reduce((mem, dart) => {\n    if (dart.miss) {\n      return mem;\n    }\n    return mem + dart.eM;\n  }, 0);\n\n  const turnHits = turn.reduce((mem, dart) => {\n    if (dart.miss) {\n      return mem;\n    }\n    return mem + 1;\n  }, 0);\n\n  darts -= 3;\n  marks -= turnMarks;\n  hits -= turnHits;\n  turns[turnMarks] -= 1;\n\n  return calculateStats({ darts, marks, hits, turns });\n};\n","import { calculateScore, calculateStats } from \"./common\";\n\nconst addStats = (playerStats, turn) => {\n  let { darts, hits, marks } = playerStats;\n  const turns = [...playerStats.turns];\n\n  const turnMarks = turn.reduce((mem, dart) => {\n    if (dart.miss) {\n      return mem;\n    }\n    return mem + dart.eM;\n  }, 0);\n\n  const turnHits = turn.reduce((mem, dart) => {\n    if (dart.miss || dart.eM === 0) {\n      return mem;\n    }\n    return mem + 1;\n  }, 0);\n\n  darts += 3;\n  marks += turnMarks;\n  hits += turnHits;\n  turns[turnMarks] += 1;\n\n  return calculateStats({ darts, marks, hits, turns });\n};\n\nconst checkWinner = (format, scores) => {\n  if (format === \"test\") {\n    if (scores[0].points >= 4) {\n      return 0;\n    }\n    if (scores[1].points >= 4) {\n      return 1;\n    }\n    return null;\n  }\n\n  if (scores[0].marks.every((sector) => sector >= 3)) {\n    if (scores[0].points >= scores[1].points) {\n      return 0;\n    }\n  }\n  if (scores[1].marks.every((sector) => sector >= 3)) {\n    if (scores[1].points >= scores[0].points) {\n      return 1;\n    }\n  }\n  return null;\n};\n\nexport default (state, action) => {\n  const format = state.variants.format || \"standard\";\n\n  const active = {\n    points: state.scores[state.currentThrow].points,\n    marks: [...state.scores[state.currentThrow].marks],\n  };\n  const opponent = state.scores[(state.currentThrow + 1) % 2];\n\n  const currentTurn = Array.from(Array(3), (_, idx) => {\n    const dart = state.currentTurn[idx];\n    if (dart === undefined || dart === null) {\n      return { miss: true, eM: 0 };\n    }\n\n    if (opponent.marks[dart.sector] >= 3 || format === \"no-points\") {\n      const eM = Math.min(dart.multiple, 3 - Math.min(3, active.marks[dart.sector]));\n      active.marks[dart.sector] += eM;\n      return { ...dart, eM };\n    }\n\n    active.marks[dart.sector] += dart.multiple;\n    return { ...dart, eM: dart.multiple };\n  });\n\n  active.points = calculateScore(format, active.marks);\n\n  const scores = state.scores.map((score, idx) => {\n    if (idx === state.currentThrow) {\n      return active;\n    }\n\n    return score;\n  });\n\n  const stats = state.stats.map((playerStats, idx) => {\n    if (idx === state.currentThrow) {\n      return addStats(playerStats, currentTurn);\n    }\n\n    return playerStats;\n  });\n\n  const currentThrow = (state.currentThrow + 1) % 2;\n  const winner = checkWinner(format, scores);\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    priorTurns: [...state.priorTurns, currentTurn],\n    currentTurn: [],\n    currentThrow,\n    scores,\n    stats,\n    winner,\n    cpuControl: !!state.players[currentThrow].cpu && winner === null,\n  };\n};\n","import { newScores, undoStats } from \"./common\";\n\nexport default (state, action) => {\n  const stats = state.priorTurns.reduce((mem, turn, idx) => {\n    const team = (state.firstThrow + idx) % 2;\n\n    return mem.map((playerStats, idx) => {\n      if (idx === team) {\n        return undoStats(playerStats, turn);\n      }\n      return playerStats;\n    });\n  }, state.stats);\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    stats,\n    currentThrow: state.firstThrow,\n    currentTurn: [],\n    priorTurns: [],\n    scores: newScores(),\n    winner: null,\n  };\n};\n","import * as actions from \"./actions\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"update_state\": {\n      return actions.updateState(state, action);\n    }\n\n    case \"click_dart\": {\n      return actions.clickDartButton(state, action);\n    }\n\n    case \"key_backspace\":\n    case \"click_back\": {\n      if (state.currentTurn.length > 0) {\n        return actions.eraseDart(state, action);\n      }\n\n      return actions.undoTurn(state, action);\n    }\n\n    case \"key_enter\":\n    case \"click_next\": {\n      if (state.winner !== null) {\n        return actions.nextLeg(state, action);\n      }\n\n      return actions.finishTurn(state, action);\n    }\n\n    case \"change_name\": {\n      return actions.changeName(state, action);\n    }\n\n    case \"click_change_first_throw\": {\n      return actions.changeFirstThrow(state, action);\n    }\n\n    case \"click_restart_leg\": {\n      return actions.restartLeg(state, action);\n    }\n\n    case \"click_restart_match\": {\n      return actions.restartMatch(state, action);\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default reducer;\n","export default (state, action) => {\n  return action.state;\n};\n","export default (state, action) => ({\n  ...state,\n  tx: state.tx + 1,\n  currentTurn: state.currentTurn.concat(action.dart),\n});\n","export default (state, action) => {\n  return {\n    ...state,\n    tx: state.tx + 1,\n    currentTurn: state.currentTurn.slice(0, -1),\n  };\n};\n","import { calculateScore, undoStats } from \"./common\";\n\nexport default (state, action) => {\n  if (state.priorTurns.length === 0) {\n    return state;\n  }\n\n  const active = {\n    points: state.scores[(state.currentThrow + 1) % 2].points,\n    marks: [...state.scores[(state.currentThrow + 1) % 2].marks],\n  };\n\n  const lastTurn = state.priorTurns.slice(-1)[0];\n  const lastTurnDarts = lastTurn.filter((dart) => dart.miss !== true);\n  lastTurnDarts.forEach((dart) => {\n    active.marks[dart.sector] -= dart.eM;\n  });\n\n  active.points = calculateScore(state.variants.format, active.marks);\n\n  const scores = state.scores.map((score, idx) => {\n    if (idx !== state.currentThrow) {\n      return active;\n    }\n\n    return score;\n  });\n\n  const stats = state.stats.map((playerStats, idx) => {\n    if (idx !== state.currentThrow) {\n      return undoStats(playerStats, lastTurn);\n    }\n\n    return playerStats;\n  });\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    priorTurns: state.priorTurns.slice(0, -1),\n    currentTurn: lastTurnDarts,\n    currentThrow: (state.currentThrow + 1) % 2,\n    scores,\n    stats,\n    winner: null,\n  };\n};\n","import { newScores } from \"./common\";\n\nexport default (state, action) => {\n  const legs = state.legs.map((legsWon, idx) => {\n    if (idx === state.winner) {\n      return legsWon + 1;\n    }\n\n    return legsWon;\n  });\n\n  const firstThrow = (state.firstThrow + 1) % 2;\n\n  const legSummary = {\n    winner: state.winner,\n    break: state.winner !== state.firstThrow,\n    score: state.scores.map((x) => x.points),\n  };\n\n  const priorLegs = state.priorLegs.concat(legSummary);\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    legs,\n    priorLegs,\n    priorTurns: [],\n    firstThrow,\n    currentThrow: firstThrow,\n    currentTurn: [],\n    scores: newScores(),\n    winner: null,\n    cpuControl: !!state.players[firstThrow].cpu,\n  };\n};\n","export default (state, action) => {\n  return {\n    ...state,\n    tx: state.tx + 1,\n    players: state.players.map((player, idx) => {\n      if (idx === action.player) {\n        return { ...player, name: action.name };\n      }\n\n      return player;\n    }),\n  };\n};\n","import restartLeg from \"./restart_leg\";\n\nexport default (state, action) => {\n  const newState = restartLeg(state, action);\n\n  return {\n    ...newState,\n    firstThrow: action.firstThrow,\n    currentThrow: action.firstThrow,\n  };\n};\n","import { newStats, newScores } from \"./common\";\n\nexport default (state, action) => {\n  return {\n    ...state,\n    tx: state.tx + 1,\n\n    legs: [0, 0],\n    stats: newStats(),\n    scores: newScores(),\n    firstThrow: 0,\n    currentThrow: 0,\n    priorTurns: [],\n    priorLegs: [],\n    currentTurn: [],\n    winner: null,\n  };\n};\n","import { pick } from \"lib\";\n\nconst getSectorOptions = (state) => {\n  const currentScores = state.scores[state.currentThrow];\n  const opponentScores = state.scores[(state.currentThrow + 1) % 2];\n\n  const highestScoreSector = currentScores.marks.findIndex((marks, idx) => {\n    return marks >= 3 && opponentScores.marks[idx] < 3;\n  });\n\n  const highestOpenSector = currentScores.marks.findIndex((marks, idx) => {\n    return marks < 3 && opponentScores.marks[idx] < 3;\n  });\n\n  const highestProgressSector = currentScores.marks.findIndex((marks) => {\n    return marks < 3;\n  });\n\n  const activeSectors = currentScores.marks.reduce((mem, marks, idx) => {\n    if (marks < 3 || (marks >= 3 && opponentScores.marks[idx] < 3)) {\n      mem.push(idx);\n    }\n\n    return mem;\n  }, []);\n\n  const randomSector = pick(activeSectors);\n\n  return {\n    score: highestScoreSector > -1 ? highestScoreSector : highestOpenSector,\n    open: highestOpenSector > -1 ? highestOpenSector : highestProgressSector,\n    progress: highestProgressSector > -1 ? highestProgressSector : randomSector,\n    random: randomSector,\n  };\n};\n\nconst getTarget = (cpuLevel, options, margin) => {\n  switch (cpuLevel) {\n    case \"hard\":\n      if (margin > 0) {\n        if (Math.random() < 0.8) {\n          return options.progress;\n        }\n        return options.score;\n      }\n      if (Math.random() < 0.8) {\n        return options.score;\n      }\n      return options.open;\n\n    case \"medium\":\n      if (margin < 0) {\n        if (Math.random() < 0.667) {\n          return options.score;\n        }\n        return options.open;\n      }\n      if (Math.random() < 0.667) {\n        return options.progress;\n      }\n      return options.score;\n\n    case \"easy\":\n    default:\n      if (Math.random() < 0.2) {\n        return options.random;\n      }\n      if (Math.random() < 0.3) {\n        return options.score;\n      }\n      return options.open;\n  }\n};\n\nconst getDisplayValue = (sector, multiple) => {\n  if (sector === 6) {\n    return multiple === 2 ? \"DB\" : \"B\";\n  }\n  if (multiple === 3) {\n    return `T${20 - sector}`;\n  }\n  if (multiple === 2) {\n    return `D${20 - sector}`;\n  }\n  return `${20 - sector}`;\n};\n\nconst getResult = (cpuLevel, target) => {\n  const accuracy = Math.random();\n  const bonus = Math.random();\n\n  switch (cpuLevel) {\n    case \"hard\":\n      if (target === 6 && accuracy < 0.45) {\n        const multiple = bonus < 0.35 ? 2 : 1;\n        return { sector: target, multiple, display: getDisplayValue(target, multiple) };\n      }\n\n      if (target < 6 && accuracy < 0.55) {\n        const multiple = bonus < 0.2 ? (bonus < 0.15 ? 3 : 2) : 1;\n        return { sector: target, multiple, display: getDisplayValue(target, multiple) };\n      }\n\n      return { miss: true };\n\n    case \"medium\":\n      if (target === 6 && accuracy < 0.35) {\n        const multiple = bonus < 0.25 ? 2 : 1;\n        return { sector: target, multiple, display: getDisplayValue(target, multiple) };\n      }\n\n      if (target < 6 && accuracy < 0.45) {\n        const multiple = bonus < 0.15 ? (bonus < 0.1 ? 3 : 2) : 1;\n        return { sector: target, multiple, display: getDisplayValue(target, multiple) };\n      }\n\n      return { miss: true };\n\n    case \"easy\":\n    default:\n      if (target === 6 && accuracy < 0.25) {\n        const multiple = bonus < 0.15 ? 2 : 1;\n        return { sector: target, multiple, display: getDisplayValue(target, multiple) };\n      }\n\n      if (target < 6 && accuracy < 0.38) {\n        const multiple = bonus < 0.09 ? (bonus < 0.04 ? 3 : 2) : 1;\n        return { sector: target, multiple, display: getDisplayValue(target, multiple) };\n      }\n\n      return { miss: true };\n  }\n};\n\nexport default (state) => {\n  const cpuLevel = state.players[state.currentThrow].cpu;\n  const options = getSectorOptions(state);\n\n  let target = getTarget(\n    cpuLevel,\n    options,\n    state.scores[state.currentThrow].points - state.scores[(state.currentThrow + 1) % 2].points\n  );\n  if (target === -1 || Math.random() < 0.035) {\n    target = options.random;\n  }\n\n  return getResult(cpuLevel, target);\n};\n","import React from \"react\";\n\nimport SpectateMode from \"components/SpectateMode\";\nimport CricketScoreboard from \"components/CricketScoreboard\";\nimport CricketActions from \"components/CricketActions\";\nimport CricketTabs from \"components/CricketTabs\";\n\nimport reducerFn from \"./reducer\";\n\nimport { timeout } from \"lib\";\n\nimport simulateDart from \"./simulateDart\";\n\nimport \"./index.scss\";\n\nconst TIMEOUT_MS = 500;\n\nconst simulateTurn = async (state, dispatch) => {\n  for (let i = state.currentTurn.length; i < 3; i++) {\n    await timeout(TIMEOUT_MS);\n    dispatch({\n      type: \"click_dart\",\n      dart: simulateDart(state),\n    });\n  }\n\n  await timeout(TIMEOUT_MS);\n  dispatch({ type: \"click_next\" });\n};\n\nconst Cricket = (props) => {\n  const [state, _wrappedDispatch] = React.useReducer(reducerFn, props.state);\n  const [isSpectating, setIsSpectating] = React.useState(false);\n\n  React.useEffect(() => {\n    props.state && _wrappedDispatch({ type: \"update_state\", state: props.state });\n  }, [props.state]);\n\n  React.useEffect(() => {\n    window.document.title = `[${state.roomCode}] ${state.players[0].name} ${state.legs[0]}-${state.legs[1]} ${state.players[1].name}`;\n  }, [state.roomCode, state.players, state.legs]);\n\n  React.useEffect(() => {\n    const keyListener = (e) => {\n      switch (e.code) {\n        case \"Enter\":\n          e.preventDefault();\n          dispatch({ type: \"key_enter\" });\n          return;\n\n        case \"Backspace\":\n          dispatch({ type: \"key_backspace\" });\n          return;\n\n        default:\n          return;\n      }\n    };\n\n    window.addEventListener(\"keydown\", keyListener);\n\n    return () => window.removeEventListener(\"keydown\", keyListener);\n  });\n\n  const _controlledDispatch = (action) => {\n    if (isSpectating) {\n      return;\n    }\n\n    const newState = reducerFn(state, action);\n    if (!newState) {\n      return;\n    }\n\n    props.updateState(newState);\n    _wrappedDispatch(action);\n  };\n\n  const dispatch = (action) => {\n    if (state.cpuControl) {\n      return;\n    }\n\n    _controlledDispatch(action);\n  };\n\n  React.useEffect(() => {\n    if (state.cpuControl && state.winner === null) {\n      simulateTurn(state, _controlledDispatch);\n    }\n  }, [state.cpuControl, state.winner, state.currentThrow]);\n\n  return (\n    <div className=\"cricket-container\">\n      <div className=\"cricket-spectate-container\">\n        <SpectateMode\n          spectating={isSpectating}\n          clickChange={() => setIsSpectating(!isSpectating)}\n        />\n      </div>\n      <div className=\"cricket-scoreboard-container\">\n        <CricketScoreboard\n          spectating={isSpectating}\n          state={state}\n          changeName={(name, player) => dispatch({ type: \"change_name\", name, player })}\n        />\n      </div>\n      <div className=\"cricket-actions-container\">\n        <CricketActions\n          spectating={isSpectating}\n          state={state}\n          clickDart={(dart) => dispatch({ type: \"click_dart\", dart })}\n          clickBack={() => dispatch({ type: \"click_back\" })}\n          clickNext={() => dispatch({ type: \"click_next\" })}\n        />\n      </div>\n      <div className=\"cricket-tabs-container\">\n        <CricketTabs\n          state={state}\n          spectating={isSpectating}\n          changeFirstThrow={(firstThrow) =>\n            dispatch({ type: \"click_change_first_throw\", firstThrow })\n          }\n          restartLeg={() => dispatch({ type: \"click_restart_leg\" })}\n          restartMatch={() => dispatch({ type: \"click_restart_match\" })}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Cricket;\n","import React from \"react\";\n\nconst X01Center = ({ title }) => {\n  return (\n    <div className=\"x01-center\">\n      <div className=\"x01-center-cell center-13\">{title}</div>\n      <div className=\"x01-center-cell center-3\">Legs</div>\n      <div className=\"x01-center-cell center-3\">Points</div>\n    </div>\n  );\n};\n\nexport default X01Center;\n","import React from \"react\";\n\nconst X01Name = ({ value, changeName }) => {\n  return <input className=\"x01-name\" value={value} onChange={(e) => changeName(e.target.value)} />;\n};\n\nconst X01Player = ({ name, legs, score, winner, firstThrow, changeName }) => {\n  return (\n    <div className=\"x01-player\">\n      <div className={`x01-cell x01-nameplate ${winner ? \"x01-winner\" : \"\"}`}>\n        {changeName && <X01Name changeName={changeName} value={name} />}\n        {!changeName && name}\n        {firstThrow && <div className=\"x01-leader\" title=\"Throwing first this leg\"></div>}\n      </div>\n      <div className=\"x01-cell x01-legs\">{legs}</div>\n      <div className=\"x01-cell x01-points\">{score}</div>\n    </div>\n  );\n};\n\nexport default X01Player;\n","import React from \"react\";\n\nimport ActiveIcon from \"components/ActiveIcon\";\nimport X01Center from \"./X01Center\";\nimport X01Player from \"./X01Player\";\nimport LastTurn from \"components/LastTurn\";\n\nimport \"./index.scss\";\n\nconst X01Scoreboard = ({ state, spectating, changeName }) => {\n  const scoreboardRef = React.useRef(null);\n\n  React.useEffect(() => {\n    const keyListener = (e) => e.stopPropagation();\n    const ref = scoreboardRef.current;\n    ref && ref.addEventListener(\"keyup\", keyListener);\n\n    return () => ref && ref.removeEventListener(\"keyup\", keyListener);\n  }, [scoreboardRef]);\n\n  return (\n    <div\n      ref={scoreboardRef}\n      className={`x01-scoreboard x01-scoreboard-players-${state.players.length}`}\n    >\n      <ActiveIcon currentThrow={state.currentThrow} winner={state.winner !== null} />\n      <div className=\"x01-content\">\n        <X01Center title={state.title} />\n        {state.players.map((player, idx) => {\n          return (\n            <X01Player\n              key={idx}\n              changeName={!spectating && ((name) => changeName(name, idx))}\n              name={player.name}\n              legs={state.legs[idx]}\n              score={state.scores[idx]}\n              winner={state.winner === idx}\n              firstThrow={state.firstThrow === idx}\n            />\n          );\n        })}\n        <LastTurn state={state} />\n      </div>\n    </div>\n  );\n};\n\nexport default X01Scoreboard;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst DoubleButtons = ({ text, currentTurn, clickDouble, showZero }) => {\n  return (\n    <div className=\"x01-action-content\">\n      <div className=\"x01-action-text\">{text}</div>\n      <div className=\"x01-action-buttons\">\n        {showZero && (\n          <button\n            className={`x01-action-button x01-action-button-0 ${\n              currentTurn.doubleDart === 0 ? \"x01-action-button-active\" : \"\"\n            }`}\n            onClick={() => clickDouble(0)}\n          >\n            0\n          </button>\n        )}\n        <button\n          className={`x01-action-button x01-action-button-1 ${\n            currentTurn.doubleDart === 1 ? \"x01-action-button-active\" : \"\"\n          }`}\n          onClick={() => clickDouble(1)}\n        >\n          1\n        </button>\n        <button\n          className={`x01-action-button x01-action-button-2 ${\n            currentTurn.doubleDart === 2 ? \"x01-action-button-active\" : \"\"\n          }`}\n          onClick={() => clickDouble(2)}\n        >\n          2\n        </button>\n        <button\n          className={`x01-action-button x01-action-button-3 ${\n            currentTurn.doubleDart === 3 ? \"x01-action-button-active\" : \"\"\n          }`}\n          onClick={() => clickDouble(3)}\n        >\n          3\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst X01Actions = ({\n  inputRef,\n  spectating,\n  state,\n  changeScore,\n  clickDouble,\n  clickBack,\n  clickNext,\n}) => {\n  const { variants, currentTurn } = state;\n  const activeScore = state.scores[state.currentThrow];\n  const trackDoubles = variants.trackDoubles === \"yes\";\n  const doublingIn =\n    trackDoubles &&\n    variants.start === \"double\" &&\n    activeScore === Number(variants.target) &&\n    currentTurn.score > 0;\n\n  const doublingOut =\n    trackDoubles &&\n    variants.end === \"double\" &&\n    activeScore === Number(currentTurn.score) &&\n    currentTurn.score !== \"\";\n\n  const missedDoubles =\n    trackDoubles &&\n    variants.end === \"double\" &&\n    activeScore - Number(currentTurn.score) <= 50 &&\n    currentTurn.score !== \"\";\n\n  const disableNext =\n    (doublingIn || doublingOut || missedDoubles) && state.currentTurn.doubleDart === false;\n\n  return (\n    <div className=\"x01-actions\">\n      {state.winner === null && (\n        <div className={`x01-current-thrower x01-current-thrower-${state.currentThrow}`}>\n          <strong>Current Turn:</strong> {state.players[state.currentThrow].name}\n        </div>\n      )}\n      <div className=\"x01-action-score-container\">\n        <input\n          type=\"text\"\n          className=\"x01-action-score\"\n          value={currentTurn.score}\n          ref={inputRef}\n          onChange={(e) => {\n            changeScore(e.target.value);\n          }}\n        />\n      </div>\n      {trackDoubles && (\n        <div className=\"x01-action-doubles\">\n          {currentTurn.score > 180 && \"...wait, what\"}\n          {doublingIn && (\n            <DoubleButtons\n              clickDouble={clickDouble}\n              currentTurn={currentTurn}\n              text={`Which dart did ${state.players[state.currentThrow].name} double in with?`}\n            />\n          )}\n          {missedDoubles && (\n            <DoubleButtons\n              clickDouble={clickDouble}\n              currentTurn={currentTurn}\n              showZero={true}\n              text={`How many darts did ${state.players[state.currentThrow].name} miss at double?`}\n            />\n          )}\n        </div>\n      )}\n      {!spectating && (\n        <div className=\"x01-action-current\">\n          <button className=\"x01-current-button x01-current-back\" onClick={clickBack}>\n            Back\n          </button>\n          <button\n            disabled={disableNext || (state.winner === null && state.currentTurn.score === \"\")}\n            className=\"x01-current-button x01-current-next\"\n            onClick={clickNext}\n          >\n            Next\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default X01Actions;\n","import React from \"react\";\n\nimport StatSheet from \"components/StatSheet\";\n\nimport \"./index.scss\";\n\nconst rate = (numerator, denominator, digits = 2) => {\n  if (denominator === 0) {\n    return \"--\";\n  }\n\n  if (numerator === 0) {\n    return `${numerator}/${denominator}`;\n  }\n\n  return (numerator / denominator).toFixed(digits);\n};\n\nconst X01Stats = ({ state }) => {\n  const tables = [\n    {\n      header: [\"\", \"Average\", \"First 9\"],\n      rows: state.players.map((p, idx) => {\n        const stats = state.stats[idx];\n        const average = rate(stats.all.points, stats.all.darts / 3);\n        const f9 = rate(stats.f9.points, stats.f9.darts / 3);\n\n        return [p.name, average, f9];\n      }),\n    },\n    {\n      header: [\"\", \"90+\", \"130+\", \"170+\"],\n      rows: state.players.map((p, idx) => {\n        const stats = state.stats[idx];\n        const turnCount = Object.entries(stats.turns).reduce(\n          (mem, [score, count]) => {\n            if (Number(score) >= 90) {\n              mem[90] += count;\n              if (Number(score) >= 130) {\n                mem[130] += count;\n                if (Number(score) >= 170) {\n                  mem[170] += count;\n                }\n              }\n            }\n            return mem;\n          },\n          { 90: 0, 130: 0, 170: 0 }\n        );\n\n        return [p.name, turnCount[\"90\"], turnCount[\"130\"], turnCount[\"170\"]];\n      }),\n    },\n    {\n      header: [\"\", \"Avg Out\", \"High Out\"],\n      rows: state.players.map((p, idx) => {\n        const stats = state.stats[idx];\n        return [\n          p.name,\n          rate(\n            stats.checkouts.reduce((mem, checkout) => mem + checkout, 0),\n            stats.checkouts.length\n          ),\n          stats.checkouts.reduce((mem, checkout) => (checkout > mem ? checkout : mem), 0) || \"--\",\n        ];\n      }),\n    },\n  ];\n\n  if (state.variants.trackDoubles === \"yes\") {\n    const doubleStart = state.variants.start === \"double\";\n    const doubleEnd = state.variants.end === \"double\";\n\n    const cols = [\"Doubles\"];\n    if (doubleStart) {\n      cols.push(\"In %\");\n    }\n    if (doubleEnd) {\n      cols.push(\"Out %\");\n    }\n\n    tables.push({\n      header: cols,\n      rows: state.players.map((p, idx) => {\n        const row = [p.name];\n        const stats = state.stats[idx];\n\n        if (doubleStart) {\n          row.push(rate(stats.doubleIn.hits * 100, stats.doubleIn.hits + stats.doubleIn.misses, 1));\n        }\n        if (doubleEnd) {\n          row.push(\n            rate(stats.doubleOut.hits * 100, stats.doubleOut.hits + stats.doubleOut.misses, 1)\n          );\n        }\n\n        return row;\n      }),\n    });\n  }\n\n  return (\n    <div className=\"x01-stats\">\n      <StatSheet tables={tables} />\n    </div>\n  );\n};\n\nexport default X01Stats;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst PriorLeg = ({ number, winner, isBreak, checkout }) => {\n  return (\n    <div className=\"x01-log-leg\">\n      <div className=\"x01-log-number\">Leg {number}</div>\n      <div className=\"x01-log-winner\">Winner: {winner}</div>\n      {isBreak && <div className=\"x01-log-break\">Break</div>}\n      <div className=\"x01-log-checkout\">Checkout: {checkout}</div>\n    </div>\n  );\n};\n\nconst scoreColor = (score) => {\n  if (score >= 170) {\n    return \"red\";\n  }\n\n  if (score >= 130) {\n    return \"blue\";\n  }\n\n  if (score >= 90) {\n    return \"purple\";\n  }\n};\n\nconst PriorTurn = ({ name, round, score, thrower, remaining }) => {\n  return (\n    <div className={`x01-log-turn ${remaining[thrower] === 0 ? \"x01-log-turn-winner\" : \"\"}`}>\n      <div className=\"x01-log-round\">\n        {name}, Turn {round}\n      </div>\n      <div className={`x01-log-score x01-log-score-${scoreColor(score)}`}>{score}</div>\n      <div className=\"x01-log-scores\">\n        {remaining.map((score, idx) => {\n          return (\n            <div\n              key={idx}\n              className={`x01-log-remaining x01-log-remaining-${color(idx)} ${\n                thrower === idx ? \"x01-log-remaining-active\" : \"\"\n              }`}\n            >\n              {score}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst color = (team) => {\n  switch (team) {\n    case 0:\n      return \"red\";\n    case 1:\n      return \"blue\";\n    case 2:\n      return \"green\";\n    case 3:\n      return \"orange\";\n    case 4:\n      return \"purple\";\n    case 5:\n      return \"pink\";\n    default:\n      return \"\";\n  }\n};\n\nconst X01Log = ({ state }) => {\n  const turns = [...state.priorTurns].reverse();\n  const legs = [...state.priorLegs].reverse();\n\n  return (\n    <div className=\"x01-log\">\n      {turns.map((turn, idx) => {\n        return (\n          <PriorTurn\n            key={idx}\n            name={state.players[turn.throw].name}\n            round={turn.round + 1}\n            score={turn.score}\n            remaining={turn.remaining}\n            thrower={turn.throw}\n          />\n        );\n      })}\n      {legs.map((leg, idx) => {\n        return (\n          <PriorLeg\n            key={idx}\n            idx={idx}\n            number={idx + 1}\n            winner={state.players[leg.winner].name}\n            isBreak={leg.break}\n            checkout={leg.turns[leg.winner].slice(-1)[0]}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\nexport default X01Log;\n","import React from \"react\";\n\nimport \"./index.scss\";\n\nconst VariantList = ({ variants }) => {\n  return (\n    <div className=\"x01-menu-variants\">\n      <p>\n        <strong>Target:</strong> {variants.target}\n      </p>\n      {variants.trackDoubles === \"yes\" && (\n        <>\n          <p>\n            <strong>Double In:</strong> {variants.start === \"double\" ? \"Yes\" : \"No\"}\n          </p>\n          <p>\n            <strong>Double Out:</strong> {variants.end === \"double\" ? \"Yes\" : \"No\"}\n          </p>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst DangerOption = ({ action, title, description }) => {\n  return (\n    <div className=\"danger-option\">\n      <div className=\"danger-description\">{description}</div>\n      <button onClick={action} className=\"danger-title\">\n        {title}\n      </button>\n    </div>\n  );\n};\n\nconst DangerOptions = ({ state, changeFirstThrow, restartMatch, restartLeg }) => {\n  return (\n    <div className=\"x01-menu-danger\">\n      <DangerOption\n        title=\"Change First Thrower\"\n        description=\"Changes the first thrower for this leg. Restarts any leg in progress.\"\n        action={() => changeFirstThrow((state.firstThrow + 1) % state.players.length)}\n      />\n\n      <DangerOption\n        title=\"Restart Leg\"\n        description=\"Restarts this leg from the beginning.\"\n        action={restartLeg}\n      />\n\n      <DangerOption\n        title=\"Restart Match\"\n        description=\"Restarts this match from the beginning.\"\n        action={restartMatch}\n      />\n    </div>\n  );\n};\n\nconst X01Menu = ({ state, changeFirstThrow, restartMatch, restartLeg, spectating }) => {\n  return (\n    <div className=\"x01-menu\">\n      <VariantList variants={state.variants} />\n      <a href=\"/\">Select (or create) a new room</a>\n      {!spectating && (\n        <DangerOptions\n          state={state}\n          changeFirstThrow={changeFirstThrow}\n          restartMatch={restartMatch}\n          restartLeg={restartLeg}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default X01Menu;\n","import React from \"react\";\n\nimport HeaderTab from \"components/HeaderTab\";\nimport X01Stats from \"components/X01Stats\";\nimport X01Log from \"components/X01Log\";\nimport X01Menu from \"components/X01Menu\";\n\nconst VisibleContent = (props) => {\n  const { currentPane, state } = props;\n\n  switch (currentPane) {\n    case 1:\n      return <X01Log state={state} />;\n\n    case 2:\n      return <X01Menu {...props} />;\n\n    case 0:\n    default:\n      return <X01Stats state={state} />;\n  }\n};\n\nconst X01Tabs = (props) => {\n  const [currentPane, setCurrentPane] = React.useState(0);\n  const tabTitles = [\"Stats\", \"Log\", \"Menu\"];\n\n  return (\n    <div className=\"tab-container\">\n      <div className=\"tab-header\">\n        {tabTitles.map((title, idx) => {\n          return (\n            <HeaderTab\n              key={idx}\n              title={title}\n              active={idx === currentPane}\n              clickPane={() => setCurrentPane(idx)}\n            />\n          );\n        })}\n      </div>\n      <div className=\"tab-content\">\n        <VisibleContent currentPane={currentPane} {...props} />\n      </div>\n    </div>\n  );\n};\n\nexport default X01Tabs;\n","export const addTurnToStats = (stats, turn) => {\n  return stats.map((playerStats, idx) => {\n    if (idx !== turn.throw) {\n      return playerStats;\n    }\n\n    const { darts, doubling, missedDoubles, score, round, checkout } = turn;\n\n    return {\n      all: {\n        darts: playerStats.all.darts + darts,\n        points: playerStats.all.points + score,\n      },\n      f9: {\n        darts: playerStats.f9.darts + (round < 3 ? darts : 0),\n        points: playerStats.f9.points + (round < 3 ? score : 0),\n      },\n      turns: {\n        ...playerStats.turns,\n        [score]: (playerStats.turns[score] || 0) + 1,\n      },\n      checkouts: checkout ? [...playerStats.checkouts, score] : [...playerStats.checkouts],\n      doubleIn: {\n        misses: playerStats.doubleIn.misses + (doubling === \"in\" ? missedDoubles : 0),\n        hits: playerStats.doubleIn.hits + (doubling === \"in\" && score > 0 ? 1 : 0),\n      },\n      doubleOut: {\n        misses: playerStats.doubleOut.misses + (doubling === \"out\" ? missedDoubles : 0),\n        hits: playerStats.doubleOut.hits + (doubling === \"out\" && checkout ? 1 : 0),\n      },\n    };\n  });\n};\n\nexport const removeTurnFromStats = (stats, turn) => {\n  return stats.map((playerStats, idx) => {\n    if (idx !== turn.throw) {\n      return playerStats;\n    }\n\n    const { darts, doubling, missedDoubles, score, round, checkout } = turn;\n\n    return {\n      all: {\n        darts: playerStats.all.darts - darts,\n        points: playerStats.all.points - score,\n      },\n      f9: {\n        darts: playerStats.f9.darts - (round < 3 ? darts : 0),\n        points: playerStats.f9.points - (round < 3 ? score : 0),\n      },\n      turns: {\n        ...playerStats.turns,\n        [score]: (playerStats.turns[score] || 0) - 1,\n      },\n      checkouts: checkout ? [...playerStats.checkouts.slice(0, -1)] : [...playerStats.checkouts],\n      doubleIn: {\n        misses: playerStats.doubleIn.misses - (doubling === \"in\" ? missedDoubles : 0),\n        hits: playerStats.doubleIn.hits - (doubling === \"in\" && score > 0 ? 1 : 0),\n      },\n      doubleOut: {\n        misses: playerStats.doubleOut.misses - (doubling === \"out\" ? missedDoubles : 0),\n        hits: playerStats.doubleOut.hits - (doubling === \"out\" && checkout ? 1 : 0),\n      },\n    };\n  });\n};\n","import { addTurnToStats } from \"./common\";\n\nexport default (state, action) => {\n  const { variants } = state;\n  const activeScore = state.scores[state.currentThrow];\n\n  let turnScore = Number(state.currentTurn.score);\n  if (activeScore < turnScore || activeScore - turnScore === 1) {\n    turnScore = 0;\n  }\n\n  const scores = state.scores.map((score, idx) => {\n    if (idx === state.currentThrow) {\n      return score - turnScore;\n    }\n    return score;\n  });\n\n  const currentTurn = {\n    throw: state.currentThrow,\n    round: Math.floor(state.priorTurns.length / state.players.length),\n    darts: 3,\n    remaining: [...scores],\n    score: turnScore,\n    doubling: false,\n    missedDoubles: 0,\n  };\n\n  if (activeScore === turnScore) {\n    currentTurn.checkout = true;\n  }\n\n  if (variants.trackDoubles === \"yes\") {\n    if (activeScore === Number(variants.target) && variants.start === \"double\") {\n      currentTurn.doubling = \"in\";\n      if (turnScore === 0) {\n        currentTurn.missedDoubles = 3;\n      } else {\n        currentTurn.missedDoubles = (state.currentTurn.doubleDart || 1) - 1;\n      }\n    }\n\n    if (variants.end === \"double\") {\n      if (activeScore - turnScore <= 50) {\n        currentTurn.doubling = \"out\";\n        currentTurn.missedDoubles = state.currentTurn.doubleDart;\n      }\n    }\n  }\n\n  const priorTurns = state.priorTurns.concat(currentTurn);\n  const stats = addTurnToStats(state.stats, currentTurn);\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    scores,\n    stats,\n    currentThrow: (state.currentThrow + 1) % state.players.length,\n    currentTurn: { score: \"\", doubleDart: false },\n    priorTurns,\n    winner: activeScore === turnScore ? state.currentThrow : null,\n  };\n};\n","export default (state, action) => {\n  const legs = state.legs.map((legsWon, idx) => {\n    if (idx === state.winner) {\n      return legsWon + 1;\n    }\n\n    return legsWon;\n  });\n\n  const firstThrow = (state.firstThrow + 1) % state.players.length;\n\n  const legSummary = {\n    winner: state.winner,\n    break: state.winner !== state.firstThrow,\n    score: [...state.scores],\n    turns: state.priorTurns.reduce(\n      (mem, turn) => {\n        mem[turn.throw] = mem[turn.throw].concat(turn.score);\n        return mem;\n      },\n      state.players.map((_) => [])\n    ),\n  };\n\n  const priorLegs = state.priorLegs.concat(legSummary);\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    legs,\n    firstThrow,\n    priorLegs,\n    priorTurns: [],\n    currentThrow: firstThrow,\n    currentTurn: { score: \"\", doubleDart: false },\n    scores: state.players.map((_) => Number(state.variants.target)),\n    winner: null,\n  };\n};\n","import { removeTurnFromStats } from \"./common\";\n\nexport default (state, action) => {\n  if (state.priorTurns.length === 0) {\n    return state;\n  }\n\n  const lastTurn = state.priorTurns.slice(-1)[0];\n\n  const scores = state.scores.map((score, idx) => {\n    if (idx === lastTurn.throw) {\n      return score + lastTurn.score;\n    }\n    return score;\n  });\n\n  const currentTurn = {\n    score: lastTurn.score.toString(),\n    doubleDart: lastTurn.missedDoubles,\n  };\n\n  const priorTurns = state.priorTurns.slice(0, -1);\n  const stats = removeTurnFromStats(state.stats, lastTurn);\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    scores,\n    stats,\n    currentThrow: lastTurn.throw,\n    currentTurn,\n    priorTurns,\n    winner: null,\n  };\n};\n","import { removeTurnFromStats } from \"./common\";\n\nexport default (state, action) => {\n  const stats = state.priorTurns.reduce((mem, turn) => {\n    return removeTurnFromStats(mem, turn);\n  }, state.stats);\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    stats,\n    scores: state.players.map((_) => Number(state.variants.target)),\n    currentThrow: state.firstThrow,\n    currentTurn: { score: \"\", doubleDart: false },\n    priorTurns: [],\n    winner: null,\n    cpuControl: !!state.players[state.firstThrow].cpu,\n  };\n};\n","const newStats = () => ({\n  all: { darts: 0, points: 0 },\n  f9: { darts: 0, points: 0 },\n  turns: {},\n  checkouts: [],\n  doubleIn: { misses: 0, hits: 0 },\n  doubleOut: { misses: 0, hits: 0 },\n});\n\nexport default (state, action) => {\n  return {\n    ...state,\n    tx: state.tx + 1,\n    legs: state.players.map((_) => 0),\n    scores: state.players.map((_) => Number(state.variants.target)),\n    stats: state.players.map(newStats),\n    firstThrow: 0,\n    currentThrow: 0,\n    priorTurns: [],\n    priorLegs: [],\n    currentTurn: { score: \"\", doubleDart: false },\n    winner: null,\n    cpuControl: !!state.players[0].cpu,\n  };\n};\n","import * as actions from \"./actions\";\n\nexport default (state, action) => {\n  switch (action.type) {\n    case \"update_state\":\n      return action.state;\n\n    case \"change_name\": {\n      return actions.changeName(state, action);\n    }\n\n    case \"change_score\":\n      return actions.changeScore(state, action);\n\n    case \"click_double\":\n      return {\n        ...state,\n        tx: state.tx + 1,\n        currentTurn: {\n          ...state.currentTurn,\n          doubleDart: action.double,\n        },\n      };\n\n    case \"click_next\":\n      if (state.winner === null) {\n        return actions.nextTurn(state, action);\n      }\n      return actions.nextLeg(state, action);\n\n    case \"click_back\":\n      return actions.undoTurn(state, action);\n\n    case \"click_change_first_throw\":\n      return actions.changeFirstThrow(state, action);\n\n    case \"click_restart_leg\":\n      return actions.restartLeg(state, action);\n\n    case \"click_restart_match\":\n      return actions.restartMatch(state, action);\n\n    case \"key_number\":\n      return actions.keyNumber(state, action);\n\n    case \"key_enter\":\n      return actions.keyEnter(state, action);\n\n    case \"key_backspace\":\n      if (state.currentTurn.score === \"\") {\n        return actions.undoTurn(state, action);\n      }\n\n      return actions.keyBackspace(state, action);\n\n    default:\n      return state;\n  }\n};\n","export default (state, action) => {\n  return {\n    ...state,\n    tx: state.tx + 1,\n    players: state.players.map((player, idx) => {\n      if (idx === action.player) {\n        return { ...player, name: action.name };\n      }\n\n      return player;\n    }),\n  };\n};\n","export default (state, action) => {\n  if (isNaN(action.score) || Number(action.score) > 180 || action.score.includes(\"-\")) {\n    return state;\n  }\n\n  return {\n    ...state,\n    tx: state.tx + 1,\n    currentTurn: {\n      ...state.currentTurn,\n      score: Number(action.score),\n    },\n  };\n};\n","import restartLeg from \"./restart_leg\";\n\nexport default (state, action) => {\n  const newState = restartLeg(state, action);\n\n  return {\n    ...newState,\n    firstThrow: action.firstThrow,\n    currentThrow: action.firstThrow,\n  };\n};\n","export default (state, action) => {\n  return {\n    ...state,\n    tx: state.tx + 1,\n    currentTurn: {\n      ...state.currentTurn,\n      score: Number(state.currentTurn.score + action.digit),\n    },\n  };\n};\n","import nextLeg from \"./next_leg\";\nimport nextTurn from \"./next_turn\";\n\nexport default (state, action) => {\n  const { variants, currentTurn } = state;\n  const activeScore = state.scores[state.currentThrow];\n  const trackDoubles = variants.trackDoubles === \"yes\";\n  const doublingIn =\n    trackDoubles &&\n    variants.start === \"double\" &&\n    activeScore === Number(variants.target) &&\n    currentTurn.score > 0;\n\n  const doublingOut =\n    trackDoubles &&\n    variants.end === \"double\" &&\n    activeScore === Number(currentTurn.score) &&\n    currentTurn.score !== \"\";\n\n  const missedDoubles =\n    trackDoubles &&\n    variants.end === \"double\" &&\n    activeScore - Number(currentTurn.score) <= 50 &&\n    currentTurn.score !== \"\";\n\n  const disableNext =\n    state.currentTurn.score === \"\" ||\n    ((doublingIn || doublingOut || missedDoubles) && state.currentTurn.doubleDart === false);\n\n  if (disableNext) {\n    return state;\n  }\n\n  if (state.winner === null) {\n    return nextTurn(state, action);\n  }\n  return nextLeg(state, action);\n};\n","export default (state, action) => {\n  return {\n    ...state,\n    tx: state.tx + 1,\n    currentTurn: {\n      ...state.currentTurn,\n      score: state.currentTurn.score.split(\"\").slice(0, -1).join(\"\"),\n    },\n  };\n};\n","import React from \"react\";\n\nimport SpectateMode from \"components/SpectateMode\";\nimport X01Scoreboard from \"components/X01Scoreboard\";\nimport X01Actions from \"components/X01Actions\";\nimport X01Tabs from \"components/X01Tabs\";\n\nimport reducerFn from \"./reducer\";\n\nimport \"./index.scss\";\n\nconst X01 = (props) => {\n  const [state, _wrappedDispatch] = React.useReducer(reducerFn, props.state);\n  const [isSpectating, setIsSpectating] = React.useState(false);\n  const inputElement = React.useRef(null);\n\n  React.useEffect(() => {\n    props.state && _wrappedDispatch({ type: \"update_state\", state: props.state });\n  }, [props.state]);\n\n  React.useEffect(() => {\n    if (state.players.length !== 2) {\n      window.document.title = `[${state.roomCode}] Live Darts Scoring`;\n      return;\n    }\n\n    window.document.title = `[${state.roomCode}] ${state.players[0].name} ${state.legs[0]}-${state.legs[1]} ${state.players[1].name}`;\n  }, [state.roomCode, state.players, state.legs]);\n\n  React.useEffect(() => {\n    const keyListener = (e) => {\n      switch (e.code) {\n        case \"Digit0\":\n        case \"Digit1\":\n        case \"Digit2\":\n        case \"Digit3\":\n        case \"Digit4\":\n        case \"Digit5\":\n        case \"Digit6\":\n        case \"Digit7\":\n        case \"Digit8\":\n        case \"Digit9\":\n          if (document.activeElement !== inputElement.current) {\n            inputElement.current.focus();\n            dispatch({ type: \"key_number\", digit: e.key });\n          }\n          return;\n\n        case \"Enter\":\n          e.preventDefault();\n          dispatch({ type: \"key_enter\" });\n          return;\n\n        default:\n          return;\n      }\n    };\n\n    window.addEventListener(\"keyup\", keyListener);\n\n    return () => window.removeEventListener(\"keyup\", keyListener);\n  });\n\n  const dispatch = (action) => {\n    if (isSpectating) {\n      return;\n    }\n\n    const newState = reducerFn(state, action);\n    if (!newState) {\n      return;\n    }\n\n    props.updateState(newState);\n    _wrappedDispatch(action);\n  };\n\n  return (\n    <div className=\"x01-container\">\n      <div className=\"x01-spectate-container\">\n        <SpectateMode\n          spectating={isSpectating}\n          clickChange={() => setIsSpectating(!isSpectating)}\n        />\n      </div>\n      <div className=\"x01-scoreboard-container\">\n        <X01Scoreboard\n          spectating={isSpectating}\n          state={state}\n          changeName={(name, player) => dispatch({ type: \"change_name\", name, player })}\n        />\n      </div>\n      <div className=\"x01-actions-container\">\n        <X01Actions\n          spectating={isSpectating}\n          state={state}\n          changeScore={(score) => dispatch({ type: \"change_score\", score })}\n          clickDouble={(double) => dispatch({ type: \"click_double\", double })}\n          clickNext={() => dispatch({ type: \"click_next\" })}\n          clickBack={() => dispatch({ type: \"click_back\" })}\n          inputRef={inputElement}\n        />\n      </div>\n      <div className=\"x01-tabs-container\">\n        <X01Tabs\n          state={state}\n          spectating={isSpectating}\n          changeFirstThrow={(firstThrow) =>\n            dispatch({ type: \"click_change_first_throw\", firstThrow })\n          }\n          restartLeg={() => dispatch({ type: \"click_restart_leg\" })}\n          restartMatch={() => dispatch({ type: \"click_restart_match\" })}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default X01;\n","import React from \"react\";\nimport Cricket from \"components/Cricket\";\nimport X01 from \"components/X01\";\n\nconst ActiveGameDisplay = ({ state, updateState }) => {\n  switch (state.game) {\n    case \"x01\":\n      return <X01 state={state} updateState={updateState} />;\n\n    case \"cricket\":\n    default:\n      return <Cricket state={state} updateState={updateState} />;\n  }\n};\n\nexport default ActiveGameDisplay;\n","import React from \"react\";\n\nimport RoomSelect from \"../RoomSelect\";\nimport ActiveGameDisplay from \"../ActiveGameDisplay\";\n\nimport \"./index.scss\";\n\nconst applicationReducer = (state, action) => {\n  switch (action.type) {\n    case \"update_state\":\n      return action.state;\n\n    default:\n      return state;\n  }\n};\n\nconst init = () => ({\n  tx: 0,\n  isActive: false,\n  game: null,\n  variants: null,\n});\n\nconst App = (props) => {\n  const [appState, dispatch] = React.useReducer(applicationReducer, {}, init);\n\n  React.useEffect(() => {\n    if (props.state) {\n      dispatch({ type: \"update_state\", state: props.state });\n    }\n  }, [props.state]);\n\n  return (\n    <div className=\"app-container\">\n      <div className=\"app-content\">\n        {appState.isActive ? (\n          <ActiveGameDisplay state={appState} updateState={props.sendState} />\n        ) : (\n          <RoomSelect\n            checkRoom={props.checkRoom}\n            roomStatus={props.roomStatus}\n            joinRoom={props.joinRoom}\n            createRoom={props.createRoom}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport io from \"socket.io-client\";\nimport { reducer, initReducer } from \"./reducer\";\n\nimport App from \"../App\";\n\nconst SocketProvider = ({ hashObject, urlFragment }) => {\n  const [appState, dispatch] = React.useReducer(reducer, initReducer({ urlFragment }));\n  const [socket, setSocket] = React.useState(null);\n\n  React.useEffect(() => {\n    const socket = io();\n    socket.on(\"update\", (data) => {\n      dispatch({ type: \"update_state\", data });\n    });\n\n    setSocket(socket);\n\n    return () => {\n      socket.close();\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (socket && appState.shortCode) {\n      window.history.replaceState(null, null, `/room/${appState.shortCode}`);\n    }\n  }, [socket, appState.shortCode]);\n\n  React.useEffect(() => {\n    if (socket) {\n      if (appState.loading) {\n        socket.emit(\"join_short\", appState.loading, (response) => {\n          dispatch({ type: \"join_room_response\", response });\n        });\n      }\n    }\n  }, [socket, appState.loading, appState.shortCode]);\n\n  const sendState = (state) => {\n    socket.emit(\"update_channel\", {\n      state,\n      publicKey: appState.publicKey,\n      privateKey: appState.privateKey,\n    });\n  };\n\n  const checkRoom = (shortCode) => {\n    socket.emit(\"validate_short\", shortCode, (response) => {\n      dispatch({\n        type: \"check_room_response\",\n        shortCode,\n        publicKey: response.shortCode,\n      });\n    });\n  };\n\n  const joinRoom = () => {\n    if (appState.shortCode) {\n      socket.emit(\"leave_short\", appState.shortCode);\n    }\n    socket.emit(\"join_short\", appState.roomStatus.shortCode, (response) => {\n      dispatch({ type: \"join_room_response\", response });\n    });\n  };\n\n  const createRoom = (initialState) => {\n    socket.emit(\n      \"create_channel\",\n      {\n        shortCode: appState.roomStatus.shortCode,\n        state: initialState,\n        incremental: true,\n      },\n      (response) => {\n        dispatch({ type: \"create_room_response\", response });\n      }\n    );\n  };\n\n  return (\n    <>\n      {appState.loading ? null : (\n        <App\n          sendState={sendState}\n          checkRoom={checkRoom}\n          joinRoom={joinRoom}\n          createRoom={createRoom}\n          state={appState.state}\n          roomStatus={appState.roomStatus}\n        />\n      )}\n    </>\n  );\n};\n\nexport default SocketProvider;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport SocketProvider from \"./components/SocketProvider\";\nimport \"./index.scss\";\n\nconst urlFragment = window.location.pathname.split(\"/\").filter((a) => a);\nconst hash = window.location.hash.split(\"#\")[1];\nlet hashObject = null;\nif (hash) {\n  hashObject = hash.split(\"&\").reduce((mem, kvPair) => {\n    if (!kvPair.includes(\"=\")) {\n      if (kvPair !== \"\") {\n        mem[kvPair] = true;\n      }\n      return mem;\n    }\n\n    const [key, value] = kvPair.split(\"=\");\n    mem[key] = value;\n    return mem;\n  }, {});\n}\n\nReactDOM.render(\n  <SocketProvider hashObject={hashObject} urlFragment={urlFragment} />,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}